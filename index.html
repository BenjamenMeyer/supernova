<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>supernova by major</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>supernova</h1>
        <p>Use novaclient with multiple OpenStack nova environments the easy way</p>

        <p class="view"><a href="https://github.com/major/supernova">View the Project on GitHub <small>major/supernova</small></a></p>


        <ul>
          <li><a href="https://github.com/major/supernova/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/major/supernova/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/major/supernova">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h2>
<a name="supernova---use-novaclient-with-multiple-nova-environments-the-easy-way" class="anchor" href="#supernova---use-novaclient-with-multiple-nova-environments-the-easy-way"><span class="octicon octicon-link"></span></a>supernova - use novaclient with multiple nova environments the easy way</h2>

<p>You may like <em>supernova</em> if you regularly have the following problems:</p>

<ul>
<li>You hate trying to source multiple novarc files when using <em>nova</em>
</li>
<li>You get your terminals confused and do the wrong things in the wrong nova environment</li>
<li>You don't like remembering things</li>
<li>You want to keep sensitive API keys and passwords out of plain text configuration files (see the "Working with keyrings" section toward the end)</li>
<li>You need to share common skeleton environment variables for <em>nova</em> with your teams</li>
</ul><p>If any of these complaints ring true, <em>supernova</em> is for you. <em>supernova</em> manages multiple nova environments without sourcing novarc's or mucking with environment variables.</p>

<h3>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h3>

<pre><code>git clone git://github.com/major/supernova.git
cd supernova
python setup.py install
</code></pre>

<h3>
<a name="configuration" class="anchor" href="#configuration"><span class="octicon octicon-link"></span></a>Configuration</h3>

<p>For <em>supernova</em> to work properly, each environment must be defined in <code>~/.supernova</code> (in your user's home directory).  The data in the file is exactly the same as the environment variables which you would normally use when running <em>nova</em>.  You can copy/paste from your novarc files directly into configuration sections within <code>~/.supernova</code>.</p>

<p>Here's an example of how to use supernova with <a href="http://www.rackspace.com/cloud/servers/">Rackspace Cloud Servers</a> in different datacenters:</p>

<pre><code>[iad]
OS_AUTH_URL=https://identity.api.rackspacecloud.com/v2.0/
NOVA_RAX_AUTH=1
OS_AUTH_SYSTEM=rackspace
OS_REGION_NAME=IAD
OS_TENANT_NAME=your_rackspace_cloud_username
OS_USERNAME=your_rackspace_cloud_username
OS_PASSWORD=your_rackspace_api_key
OS_PROJECT_ID=your_rackspace_cloud_account_number

[ord]
OS_AUTH_URL=https://identity.api.rackspacecloud.com/v2.0/
NOVA_RAX_AUTH=1
OS_AUTH_SYSTEM=rackspace
OS_REGION_NAME=ORD
OS_TENANT_NAME=your_rackspace_cloud_username
OS_USERNAME=your_rackspace_cloud_username
OS_PASSWORD=your_rackspace_api_key
OS_PROJECT_ID=your_rackspace_cloud_account_number
</code></pre>

<p>When you use <em>supernova</em>, you'll refer to these environments as <strong>iad</strong> and <strong>ord</strong>.  Every environment is specified by its configuration header name.  See the <em>Usage</em> section below for some examples.</p>

<p><strong>Don't know your Rackspace Cloud account number?</strong> Just log into the <a href="https://mycloud.rackspace.com/">control panel</a> and look for the number next to your username.  You should see it in the top dark grey bar all the way on the right side.</p>

<h3>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h3>

<pre><code>supernova [--debug] [--list] [environment] [novaclient arguments...]

Options:
-h, --help   show this help message and exit
-d, --debug  show novaclient debug output (overrides NOVACLIENT_DEBUG)
-l, --list   list all configured environments
</code></pre>

<h5>
<a name="passing-commands-to-nova" class="anchor" href="#passing-commands-to-nova"><span class="octicon octicon-link"></span></a>Passing commands to <em>nova</em>
</h5>

<p>For example, if you wanted to list all instances within the <strong>iad</strong> environment:</p>

<pre><code>supernova iad list
</code></pre>

<p>Show a particular instance's data in the <strong>ord</strong> environment:</p>

<pre><code>supernova ord show 3edb6dac-5a75-486a-be1b-3b15fd5b4ab0a
</code></pre>

<p>The first argument is generally the environment argument and it is expected to be a single word without spaces. Any text after the environment argument is passed directly to <em>nova</em>.</p>

<h5>
<a name="debug-override" class="anchor" href="#debug-override"><span class="octicon octicon-link"></span></a>Debug override</h5>

<p>You may optionally pass <code>--debug</code> as the first argument (before the environment argument) to see additional debug information about the requests being made to the API:</p>

<pre><code>supernova --debug iad list
</code></pre>

<p>As before, any text after the environment argument is passed directly to <em>nova</em>.</p>

<h5>
<a name="listing-your-configured-environments" class="anchor" href="#listing-your-configured-environments"><span class="octicon octicon-link"></span></a>Listing your configured environments</h5>

<p>You can list all of your configured environments by using the <code>--list</code> argument.</p>

<h3>
<a name="working-with-keyrings" class="anchor" href="#working-with-keyrings"><span class="octicon octicon-link"></span></a>Working with keyrings</h3>

<p>Due to security policies at certain companies or due to general paranoia, some users may not want API keys or passwords stored in a plaintext <em>supernova</em> configuration file.  Luckily, support is now available (via the <a href="http://pypi.python.org/pypi/keyring">keyring</a> module) for storing any configuration value within your operating system's keychain.  This has been tested on the following platforms:</p>

<ul>
<li>Mac: Keychain Access.app</li>
<li>Linux: gnome-keyring, kwallet (keyring will determine the backend to use based on the system type and configuration. Make sure if you're using linux without Gnome/KDE that you have pycrypto and simplejson/json installed so CryptedFileKeyring is supported or you end up with UncryptedFileKeyring and your keyring won't be encrypted)</li>
</ul><p>To get started, you'll need to choose an environment and a configuration option.  Here's an example of some data you might not want to keep in plain text:</p>

<pre><code>supernova-keyring --set iad OS_PASSWORD
</code></pre>

<p><strong>TIP</strong>: If you need to use the same data for multiple environments, you can use a global credential item very easily:</p>

<pre><code>supernova-keyring --set global MyCompanySSO
</code></pre>

<p>Once it's stored, you can test a retrieval:</p>

<pre><code># Normal, per-environment storage
supernova-keyring --get production OS_PASSWORD

# Global storage
supernova-keyring --get global MyCompanySSO
</code></pre>

<p>You'll need to confirm that you want the data from your keychain displayed in plain text (to hopefully thwart shoulder surfers).</p>

<p>Once you've stored your sensitive data, simply adjust your <em>supernova</em> configuration file:</p>

<pre><code>#OS_PASSWORD = really_sensitive_api_key_here

# If using storage per environment
OS_PASSWORD = USE_KEYRING

# If using global storage
OS_PASSWORD = USE_KEYRING['MyCompanySSO']
</code></pre>

<p>When <em>supernova</em> reads your configuration file and spots a value of <code>USE_KEYRING</code>, it will look for credentials stored under <code>OS_PASSWORD</code> for that environment automatically.  If your keyring doesn't have a corresponding credential, you'll get an exception.</p>

<h4>
<a name="a-brief-note-about-environment-variables" class="anchor" href="#a-brief-note-about-environment-variables"><span class="octicon octicon-link"></span></a>A brief note about environment variables</h4>

<p><em>supernova</em> will only replace and/or append environment variables to the already present variables for the duration of the <em>nova</em> execution. If you have <code>OS_USERNAME</code> set outside the script, it won't be used in the script since the script will pull data from <code>~/.supernova</code> and use it to run <em>nova</em>. In addition, any variables which are set prior to running <em>supernova</em> will be left unaltered when the script exits.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/major">major</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-1115744-15");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>